---
tags:
  - Metasploit
  - Exploitation
  - Tooling
---


`Databases` in `msfconsole` are used to keep track of your results. It is no mystery that during even more complex machine assessments, much less entire networks, things can get a little fuzzy and complicated due to the sheer amount of search results, entry points, detected issues, discovered credentials, etc.

`Msfconsole` has built-in support for the PostgreSQL database system. With it, we have direct, quick, and easy access to scan results with the added ability to import and export results in conjunction with third-party tools. Database entries can also be used to configure Exploit module parameters with the already existing findings directly.

## Setting up the Database

```shell-session
sudo service postgresql status
```

```shell-session
sudo systemctl start postgresql
```

```
sudo apt update
```

```shell-session
sudo msfdb init
```

```shell-session
sudo msfdb status
```

```shell-session
sudo msfdb run
```

### Reinitiate the Database

```shell-session
msfdb reinit
```

```shell-session
cp /usr/share/metasploit-framework/config/database.yml ~/.msf4/
```

```shell-session
sudo service postgresql restart
```

```shell-session
msfconsole
```

## Database Options

```shell-session
Database Backend Commands
=========================

    Command           Description
    -------           -----------
    db_connect        Connect to an existing database
    db_disconnect     Disconnect from the current database instance
    db_export         Export a file containing the contents of the database
    db_import         Import a scan result file (filetype will be auto-detected)
    db_nmap           Executes nmap and records the output automatically
    db_rebuild_cache  Rebuilds the database-stored module cache
    db_status         Show the current database status
    hosts             List all hosts in the database
    loot              List all loot in the database
    notes             List all notes in the database
    services          List all services in the database
    vulns             List all vulnerabilities in the database
    workspace         Switch between database workspaces
```

## Using the Database

#### Workspaces

We can think of `Workspaces` the same way we would think of folders in a project. We can segregate the different scan results, hosts, and extracted information by IP, subnet, network, or domain.

To view the current Workspace list, use the `workspace` command. Adding a `-a` or `-d` switch after the command, followed by the workspace's name, will either `add` or `delete` that workspace to the database:

```shell-session
workspace
```

```shell-session
workspace -a Target_1
```

```shell-session
workspace Target_1 
```