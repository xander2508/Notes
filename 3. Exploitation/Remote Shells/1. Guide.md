---
tags:
  - Exploitation
  - RemoteShells
---

# Guide

1. Attempt all other shells before web shells due to reliability
2. Attempt reverse shells even with mismatching languages within reason, e.g. on [[Windows ASPX]] attempt [[3. Exploitation/File Types and Data/Languages/PHP]] 
3. **Ensure** that the reverse shells point to a listener on a port the victim also has open
4. Expand the options by maybe uploading a file to exploit
5. If vulnerability provides root access, a shell may not be needed

# Links

2. See [Attended HTB Walkthrough](https://hackso.me/attended-htb-walkthrough/) for configuring unique reverse shell to bypass restrictions. 
3. [Reverse Shell Cheat Sheet](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Methodology%20and%20Resources/Reverse%20Shell%20Cheatsheet.md)

# Bypass Filtering

1. Linux IPs can be written using hex,  e.g.
	* 127 = 0x7f, 0 = 0x00, and 1 = 0x01. So I can ping 0x7f000001
2. Bypass socket filtering with [Shellcode/Socket-reuse - NetSec](https://nets.ec/Shellcode/Socket-reuse) and [GitHub - BorjaMerino/Windows-One-Way-Stagers: Windows Stagers to circumvent restrictive network environments](https://github.com/BorjaMerino/Windows-One-Way-Stagers)
3. Double check open ports.
4. Check firewall rules for potential exploit pathways

## Payload Types

When it comes to creating payloads for Windows hosts, we have plenty of options to choose from. DLLs, batch files, MSI packages, and even PowerShell scripts are some of the most common methods to use. Each file type can accomplish different things for us, but what they all have in common is that they are executable on a host. Try to keep your delivery mechanism for the payload in mind, as this can determine what type of payload you use.
### Windows 

- [[Bat (Batch)]]
- [[Visual Basic Script (VBS)]]
- [[MSI (Microsoft Software Installer)]]
- [[PS1 (PowerShell Script)]]
- [[Portable Executable (EXE)]]
- [[DLL (Dynamic-link library)]]

## What is a Web Shell?

A `web shell` is a browser-based shell session we can use to interact with the underlying operating system of a web server.

- Web applications sometimes automatically delete files after a pre-defined period
- Limited interactivity with the operating system in terms of navigating the file system, downloading and uploading files, chaining commands together may not work (ex. `whoami && hostname`), slowing progress, especially when performing enumeration -Potential instability through a non-interactive web shell
- Greater chance of leaving behind proof that we were successful in our attack


