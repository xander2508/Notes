---
tags:
  - Kerberos
  - Post-Exploitation
  - OperatingSystems
  - Linux
  - Concepts
  - Information
---
As attackers, we may have several uses for a keytab file. The first thing we can do is impersonate a user using `kinit`. To use a keytab file, we need to know which user it was created for. `klist` is another application used to interact with Kerberos on Linux. 
#### Listing keytab File Information

This application reads information from a `keytab` file. Let's see that with the following command:

```shell-session
klist -k -t 
```

> [!NOTE]
> **kinit** is case-sensitive, so be sure to use the name of the principal as shown in klist. In this case, the username is lowercase, and the domain name is uppercase.

```shell-session
kinit carlos@INLANEFREIGHT.HTB -k -t /opt/specialfiles/carlos.keytab
```

See [[2. Enumeration/TCP/445. Server Message Block (SMB)/1. Guide|SMB]]

```shell-session
 smbclient //dc01/carlos -k -c ls
```

> [!NOTE]
> To keep the ticket from the current session, before importing the keytab, save a copy of the ccache file present in the environment variable `KRB5CCNAME`.


#### Extracting Keytab Hashes with KeyTabExtract

See [[Kerberos KeyTab Hashes|KeyTabExtract]]

With the NTLM hash, we can perform a [[Pass the Hash (PtH)|Pass the Hash]] attack. With the AES256 or AES128 hash, we can forge our tickets using Rubeus or attempt to crack the hashes to obtain the plaintext password.















































