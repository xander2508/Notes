---
tags:
  - Enumeration
  - TCP
  - NetworkFileSystem
  - NFS
---
Network File System (`NFS`) is a network protocol that allows us to store and manage files on remote systems as if they were stored on the local system. NFS was developed by Sun Microsystems and has the same purpose as [[2. Enumeration/TCP/445. Server Message Block (SMB)/1. Guide|SMB]]. 

It enables easy and efficient management of files across networks. Its purpose is to access file systems over a network as if they were local

NFS is an Internet standard that governs the procedures in a distributed file system. While NFS protocol version 3.0 (`NFSv3`), which has been in use for many years, authenticates the client computer, this changes with `NFSv4`. Here, as with the Windows SMB protocol, the user must authenticate.

## Versions 

| **Version** | **Features**                                                                                                                                                                                                                                                         |
| ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `NFSv2`     | It is older but is supported by many systems and was initially operated entirely over UDP.                                                                                                                                                                           |
| `NFSv3`     | It has more features, including variable file size and better error reporting, but is not fully compatible with NFSv2 clients.                                                                                                                                       |
| `NFSv4`     | It includes Kerberos, works through firewalls and on the Internet, no longer requires portmappers, supports ACLs, applies state-based operations, and provides performance improvements and high security. It is also the first version to have a stateful protocol. |
# Guide

1. [2049 - Pentesting NFS Service | HackTricks | HackTricks](https://book.hacktricks.xyz/network-services-pentesting/nfs-service-pentesting)
2. See [[Network File System (NFS) Root Squashing]]

# Walkthrough 

1. [[Write-up] Vulnix - playing around with NFS - Christophe Tafani-Dereeper](https://blog.christophetd.fr/write-up-vulnix/)
# Notes

1. If you see NFS related ACL port open, see `/etc/exports`
2. If you cannot access the mounted file system, see [Vulnix Write-up\ ](https://blog.christophetd.fr/write-up-vulnix/)
3. NFS is configured using the configuration file `/etc/exports`, see [[#Configuration]]
# Example Commands


```bash
mount -t nfs 192.168.1.72:/home/vulnix /tmp/mnt -nolock
```


# Configuration 

|**Permissions**|**Description**|
|---|---|
|`rw`|Gives users and systems read and write permissions to the shared directory.|
|`ro`|Gives users and systems read-only access to the shared directory.|
|`no_root_squash`|Prevents the root user on the client from being restricted to the rights of a normal user.|
|`root_squash`|Restricts the rights of the root user on the client to the rights of a normal user.|
|`sync`|Synchronizes the transfer of data to ensure that changes are only transferred after they have been saved on the file system.|
|`async`|Transfers data asynchronously, which makes the transfer faster, but may cause inconsistencies in the file system if changes have not been fully committed.|


#### Create NFS Share

  Network Services

```shell-session
mkdir nfs_sharing
echo '/home/cry0l1t3/nfs_sharing hostname(rw,sync,no_root_squash)' >> /etc/exports
cat /etc/exports | grep -v "#"

/home/cry0l1t3/nfs_sharing hostname(rw,sync,no_root_squash)
```


#### Mount NFS Share

  Network Services

```shell-session
mkdir ~/target_nfs
mount 10.129.12.17:/home/john/dev_scripts ~/target_nfs
```