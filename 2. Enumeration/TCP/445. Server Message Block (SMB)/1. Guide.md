---
tags:
  - Enumeration
  - TCP
  - Server-Message-Block
  - SMB
---
[SMB](https://learn.microsoft.com/en-us/openspecs/windows_protocols/ms-smb2/4287490c-602c-41c0-a23e-140a1f137832) provides Windows hosts with the capability to share resources, files, and a standard way of authenticating between hosts to determine if access to resources is allowed. For other distros, SAMBA is the open-source option.

# Guide

1. Getting access to the file system allows remote code execution, see [[2. Enumeration/TCP/445. Server Message Block (SMB)/Tooling/Impacket|Impacket]]
2. If you can get the victim to call back use [[2. Enumeration/TCP/445. Server Message Block (SMB)/Tooling/Responder|Responder]] to potentially capture creds
3. If you can get a user to click on a file, see [[Shell Command Files (SCF) File Attacks]]

# Table of Contents

1. **Active Directory Certificate Services** probably means a `/certsrv` on the [[2. Enumeration/TCP/80. HTTP/1. Guide|HTTP]] service
2. Bruteforcing SMB is possible see [[Hydra#SMB]]
# Default Commands 

List shares

```
smbmap -H 10.10.10.100
```

View share 

```
smbget -R -U "" smb://10.10.10.100/Replication
```

Mount shares 

```
sudo mount -t cifs  -o rw,guest,vers=3.0 //10.10.10.219/kanban/ /mnt/kanban
```

If this command is not working check the syntax. If the syntax is correct yet the command is still not working, `cifs-utils` may need to be installed. This can be done with the following command:

```shell-session
sudo apt-get install cifs-utils
```